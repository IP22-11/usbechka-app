<Window x:Class="usbechka_app.pages.ClientWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:usbechka_app.pages"
        Title="Главная" 
        Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Window.Resources>
        <local:BoolToStatusConverter x:Key="BoolToStatusConverter"/>
    </Window.Resources>

    <Border Margin="10" Background="#FF2D2D2D" CornerRadius="10">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="0" BlurRadius="10" Color="Black" Opacity="0.5"/>
        </Border.Effect>

        <Grid>
            <Grid Height="30" VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Главная" 
                          Foreground="White"
                          VerticalAlignment="Center"
                          Margin="10,0,0,0"
                          FontSize="14"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="MinimizeButton" 
                            Content="_" 
                            Style="{StaticResource WindowButtonStyle}"
                            Click="MinimizeWindow"/>
                    <Button x:Name="CloseButton" 
                            Content="✕" 
                            Style="{StaticResource WindowButtonStyle}"
                            Click="CloseWindow"/>
                </StackPanel>
            </Grid>

            <Grid Margin="10,50,10,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1.5*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="Доступные столы" 
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>

                    <DataGrid x:Name="tables" 
                              Style="{StaticResource ModernDataGrid}"
                              ColumnHeaderStyle="{StaticResource ColumnHeaderStyle}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Номер" Binding="{Binding number_table}" Width="*"/>
                            <DataGridTextColumn Header="Статус" Width="100">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Text" Value="{Binding is_reserved, Converter={StaticResource BoolToStatusConverter}}"/>
                                        <Setter Property="HorizontalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <TextBlock Text="Ваши столы" 
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,15,0,5"/>

                    <DataGrid x:Name="your_tables" 
                              Style="{StaticResource ModernDataGrid}"
                              ColumnHeaderStyle="{StaticResource ColumnHeaderStyle}"
                              Height="150">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Номер" Binding="{Binding number_table}" Width="*"/>
                            <DataGridTextColumn Header="Статус" Width="100">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Text" Value="{Binding is_reserved, Converter={StaticResource BoolToStatusConverter}}"/>
                                        <Setter Property="HorizontalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>

                <StackPanel Grid.Column="1">
                    <TextBlock Text="Ваши заказы" 
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>

                    <DataGrid x:Name="orders" 
                              Style="{StaticResource ModernDataGrid}"
                              ColumnHeaderStyle="{StaticResource ColumnHeaderStyle}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Блюда" Binding="{Binding delishes}" Width="*"/>
                            <DataGridTextColumn Header="До" Binding="{Binding time_end, StringFormat=HH:mm}" Width="80"/>
                            <DataGridTextColumn Header="Цена" Binding="{Binding full_price, StringFormat={}{0} руб.}" Width="100"/>
                            <DataGridTextColumn Header="Оплата" Binding="{Binding payment_method}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.ColumnSpan="2" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Right"
                            Margin="0,15,0,0">
                    <Button Content="Забронировать" 
                            Click="ButtonBook" 
                            Style="{StaticResource PrimaryButton}"/>

                    <Button Content="Заказать" 
                            Click="ButtonOrder" 
                            Style="{StaticResource PrimaryButton}"/>

                    <Button Content="Отменить заказ" 
                            Click="ButtonCancelOrder" 
                            Style="{StaticResource PrimaryButton}"/>

                    <Button Content="Назад" 
                            Click="ButtonBack" 
                            Style="{StaticResource BackButton}"
                            Margin="20,0,0,0"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>